<!--
  Generated template for the ContactsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->

<ion-content padding>
  <ion-fab right bottom #fab style="margin-bottom: 10px;" *ngIf="!choosingContact">
    <button ion-fab><ion-icon name="person-add"></ion-icon></button>
    <ion-fab-list side="left">
      <button ion-button (click)="navAdd(1, fab)">From Contacts</button>
      <button ion-button (click)="navAdd(2, fab)">Manually</button>
    </ion-fab-list>
  </ion-fab>
  <ion-fab right bottom style="margin-bottom: 10px;" *ngIf="choosingContact">
    <button ion-fab style="background-color: red; color: white;" (click)="dismiss()">
      <ion-icon name="close"></ion-icon>
    </button>
  </ion-fab>
<!--   
  Do you give us consent to access your phone's contact information? -->
  <!-- <ion-list>
     <ion-item>
      <button ion-button (click)="setPermission(true)">
        Yes
      </button>
      <button ion-button (click)="setPermission(false)">
        No
      </button>
    </ion-item>
    <ion-item>
      <button ion-button (click)="importContacts()">
        Import contacts now
      </button>
    </ion-item>
  </ion-list> -->

  <ion-searchbar showCancelButton="always" [(ngModel)]="searchterm" (ionChange)="filter()"></ion-searchbar>

  <ion-list>
    <div style="width: 100%; text-align: center;" *ngIf="!filteredList || filteredList.length==0">
      <p>No contacts!</p>
      <ion-card padding>
        Track which customers owe you money and how much they owe you using this page! <br><br>
        Add a customer name/number and then enter in how much they owe you to keep a track. <br><br>
        We are soon releasing a send automatic SMS reminder feature and an option to see who owes you money on a particular date.
      </ion-card>
    </div>
    <ion-card *ngFor="let contact of filteredList">
      <ion-row (click)="navToIndividual(contact)" padding>
        <ion-col col-7 style="font-size: 16px;">{{ contact.displayName }}</ion-col>
        <ion-col col-5 style="font-size: medium;">Balance: 
          <span style="color: red;" *ngIf="contact.balance<0; else nonNeg">{{ contact.balance }}</span>
          <span style="color: green;" *ngIf="contact.balance>0; else zero" id="nonNeg">{{ contact.balance }}</span>
          <span style="color: blue;" *ngIf="contact.balance==0" id="zero">0</span>
        </ion-col>
      </ion-row>
    </ion-card>
  </ion-list>
</ion-content>
